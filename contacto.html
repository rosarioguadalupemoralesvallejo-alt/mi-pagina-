<!DOCTYPE html>  
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contacto - CHARO</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="logo">ğŸ° CHARO</div>
    <nav>
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="contacto.html" class="active">Contacto</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <h1>Haz tu pedido</h1>
    <h3>El costo adicional por envio se le cobrara dependiendo la distancia que se recorra,si es solo reserva detallar en el lugar de entrega sera en la tienda </h3>

    <!-- AquÃ­ aparecerÃ¡ el producto seleccionado -->
    <h2 id="productoSeleccionado" style="text-align:center; color:#a0002d;"></h2>

    <form action="https://formspree.io/f/xpwyrwnq" method="POST">
      <input type="text" name="nombre" placeholder="Nombre" required>
      <input type="text" name="producto" placeholder="Producto que deseas" required>
      <input type="number" name="cantidad" placeholder="Cantidad" required>
      <input type="text" name="lugar de entrega" placeholder="Lugar de entrega" required>
      <textarea name="detalles" placeholder="Detalles del pedido"></textarea>
      <button type="submit">Enviar Pedido</button>
    </form>
  </main>

  <!-- ğŸ”§ SCRIPT para detectar y mostrar el producto seleccionado -->
  <script>
    // Detectar parÃ¡metro "producto" en la URL
    const params = new URLSearchParams(window.location.search);
    const producto = params.get("producto");

    // Si existe el producto, colocarlo automÃ¡ticamente en el formulario
    if (producto) {
      document.querySelector('input[name="producto"]').value = producto;
      document.getElementById("productoSeleccionado").textContent = "ğŸ›’ EstÃ¡s comprando: " + producto;
    }

    // Enviar tambiÃ©n por WhatsApp ademÃ¡s de Formspree
    const form = document.querySelector("form");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const data = new FormData(form);
      const nombre = data.get("nombre");
      const producto = data.get("producto");
      const cantidad = data.get("cantidad");
      const lugar = data.get("lugar de entrega");
      const detalles = data.get("detalles");

      // Enviar primero a Formspree
      const response = await fetch(form.action, {
        method: "POST",
        body: data,
        headers: { Accept: "application/json" }
      });

      // Si Formspree responde OK, abrir WhatsApp con los mismos datos
      if (response.ok) {
        const mensaje = `ğŸ° *Nuevo pedido CHARO*\n\nğŸ‘¤ Nombre: ${nombre}\nğŸ“¦ Producto: ${producto}\nğŸ”¢ Cantidad: ${cantidad}\nğŸ“ Entrega: ${lugar}\nğŸ“ Detalles: ${detalles}`;
        const telefono = "59173466117"; // <-- tu nÃºmero de WhatsApp con prefijo de paÃ­s
        const url = `https://api.whatsapp.com/send?phone=${telefono}&text=${encodeURIComponent(mensaje)}`;
        window.open(url, "_blank");

        alert("âœ… Pedido enviado correctamente. Te contactaremos pronto por WhatsApp.");
        form.reset();
      } else {
        alert("âŒ Error al enviar el pedido. Intenta nuevamente.");
      }
    });
  </script>
</body>
</html>

